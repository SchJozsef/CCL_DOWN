
<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conclusion Downmeter</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.minart.js -->
https://cdn.jsdelivr.net/npm/chart.js</script>

<style>
  body { background: #f8f9fa; }
  .status-ok { color: #28a745; font-weight: bold; font-size: 1.5rem; }
  .status-error { color: #dc3545; font-weight: bold; font-size: 1.5rem; }
  .chart-container { width: 100%; max-width: 700px; margin: 30px auto; }
  .spinner-border { width: 2rem; height: 2rem; }
</style>
</head>
<body class="container py-4">
<h1 class="text-center mb-4">üåê Conclusion Downmeter</h1>

<div class="card p-4 mb-4 text-center shadow">
  <h4>Figyelt oldal:</h4>
  <p><strong>https://sm.cetin.rs/conclusion/Main</strong></p>
  <div id="status" class="status mb-3">
    <div class="spinner-border text-primary" role="status"></div>
    <p>Ellen≈ërz√©s folyamatban...</p>
  </div>
</div>

<div class="chart-container">
  <canvas id="statusChart"></canvas>
</div>

<script>
const url = "https://sm.cetin.rs/conclusion/Main";
let chart;
const ctx = document.getElementById('statusChart').getContext('2d');
chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: [],
    datasets: [{
      label: 'El√©rhet≈ës√©gi √°llapot (%)',
      data: [],
      borderColor: '#28a745',
      backgroundColor: 'rgba(40,167,69,0.1)',
      fill: true,
      tension: 0.3
    }]
  },
  options: {
    responsive: true,
    scales: {
      y: { min: 0, max: 100, title: { display: true, text: 'El√©rhet≈ës√©g (%)' } }
    }
  }
});

async function checkWebsite() {
  try {
    await fetch(url, { method: 'GET', mode: 'no-cors' });
    document.getElementById("status").innerHTML = "<span class='status-ok'>Az oldal el√©rhet≈ë ‚úÖ</span>";
    updateChart(100);
  } catch {
    document.getElementById("status").innerHTML = "<span class='status-error'>Hiba ‚ùå</span>";
    updateChart(0);
  }
}

function updateChart(value) {
  chart.data.labels.push(new Date().toLocaleTimeString());
  chart.data.datasets[0].data.push(value);
  if (chart.data.labels.length > 30) {
    chart.data.labels.shift();
    chart.data.datasets[0].data.shift();
  }
  chart.update();
}

// Ellen≈ërz√©s 5 m√°sodpercenk√©nt
setInterval(checkWebsite, 5000);
checkWebsite();
</script>
</body>
</html>
